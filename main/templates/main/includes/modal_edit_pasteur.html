<!-- Modal d'édition d'un pasteur -->
<style>
  /* Défilement vertical dans le modal "Modifier un Pasteur" */
  #editPasteurModal .modal-dialog {
    max-height: 92vh;
  }
  #editPasteurModal .modal-content {
    max-height: 92vh;
    display: flex;
    flex-direction: column;
  }
  #editPasteurModal .modal-body {
    overflow-y: auto;
    max-height: 70vh; /* zone scrollable confortable */
  }
  #editPasteurModal .modal-header, 
  #editPasteurModal .modal-footer {
    flex: 0 0 auto;
  }
  #editPasteurModal .modal-body {
    flex: 1 1 auto;
  }
  @media (max-height: 700px) {
    #editPasteurModal .modal-body { max-height: 60vh; }
  }
  @media (max-height: 550px) {
    #editPasteurModal .modal-body { max-height: 50vh; }
  }
  /* Si le thème Bootstrap prend déjà modal-dialog-scrollable, cela renforce le comportement */
</style>
<div class="modal fade" id="editPasteurModal" tabindex="-1" aria-labelledby="editPasteurModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-warning text-white">
        <h5 class="modal-title" id="editPasteurModalLabel"><i class="fas fa-edit me-2"></i>Modifier un Pasteur</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fermer"></button>
      </div>
      <form id="editPasteurForm" autocomplete="off">
        <div class="modal-body">
          <div id="editPasteurAlert" class="alert d-none" role="alert"></div>
          <input type="hidden" id="editPasteurId" name="id">
          <!-- Photo du personnel -->
          <div class="mb-3">
            <label class="form-label">Photo du personnel</label>
            <div class="d-flex align-items-center gap-3">
              <img id="editPhotoPreview" src="" alt="Aperçu photo" class="rounded" style="width:80px;height:100px;object-fit:cover;display:none;">
              <div>
                <input type="file" id="editPhoto" name="photo" accept="image/*" class="form-control form-control-sm">
                <div class="form-text">Formats recommandés: JPG/PNG. Taille max selon configuration serveur.</div>
              </div>
            </div>
          </div>
          <div class="row g-3">
            <div class="col-md-6">
              <label for="editPrenom" class="form-label">Prénoms *</label>
              <input type="text" class="form-control" id="editPrenom" name="prenom" required>
            </div>
            <div class="col-md-6">
              <label for="editNom" class="form-label">Nom *</label>
              <input type="text" class="form-control" id="editNom" name="nom" required>
            </div>
            <div class="col-md-6">
              <label for="editStatutActuel" class="form-label">Statut actuel</label>
              <input type="text" class="form-control" id="editStatutActuel" name="statut_actuel">
            </div>
            <div class="col-md-6">
              <label for="editSexe" class="form-label">Sexe</label>
              <select class="form-select" id="editSexe" name="sexe">
                <option value="">Choisir...</option>
                <option value="M">Masculin</option>
                <option value="F">Féminin</option>
              </select>
            </div>
            <div class="col-md-6">
              <label for="editDateNaissance" class="form-label">Date de naissance</label>
              <input type="date" class="form-control" id="editDateNaissance" name="date_naissance">
            </div>
            <div class="col-md-6">
              <label for="editLieuNaissance" class="form-label">Lieu de naissance</label>
              <input type="text" class="form-control" id="editLieuNaissance" name="lieu_naissance">
            </div>
            <div class="col-md-6">
              <label for="editNationalite" class="form-label">Nationalité</label>
              <input type="text" class="form-control" id="editNationalite" name="nationalite">
            </div>
            <div class="col-md-6">
              <label for="editDomicile" class="form-label">Domicile</label>
              <input type="text" class="form-control" id="editDomicile" name="domicile">
            </div>
            <div class="col-md-6">
              <label for="editEtatCivil" class="form-label">État civil</label>
              <select class="form-select" id="editEtatCivil" name="etat_civil">
                <option value="">Choisir...</option>
                <option value="CEL">Célibataire</option>
                <option value="MAR">Marié(e)</option>
                <option value="DIV">Divorcé(e)</option>
                <option value="VEU">Veuf(ve)</option>
              </select>
            </div>
            <div class="col-md-6">
              <label for="editNombreEnfants" class="form-label">Nombre d'enfants</label>
              <input type="number" min="0" class="form-control" id="editNombreEnfants" name="nombre_enfants">
            </div>
            <div class="col-md-6">
              <label for="editProfession" class="form-label">Profession</label>
              <input type="text" class="form-control" id="editProfession" name="profession">
            </div>
            <div class="col-md-6">
              <label for="editTelephone" class="form-label">Téléphone</label>
              <input type="text" class="form-control" id="editTelephone" name="telephone">
            </div>
            <div class="col-md-6">
              <label for="editEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="editEmail" name="email">
            </div>
            <div class="col-md-6">
              <label for="editDateConsecration" class="form-label">Date de consécration</label>
              <input type="date" class="form-control" id="editDateConsecration" name="date_consecration">
            </div>
            <div class="col-md-6">
              <label for="editLieuConsecration" class="form-label">Lieu de consécration</label>
              <input type="text" class="form-control" id="editLieuConsecration" name="lieu_consecration">
            </div>
            <div class="col-md-6">
              <label for="editConsacrePar" class="form-label">Consacré par</label>
              <input type="text" class="form-control" id="editConsacrePar" name="consacre_par">
            </div>
            <div class="col-md-6">
              <label for="editPrenomsPere" class="form-label">Prénoms du Père</label>
              <input type="text" class="form-control" id="editPrenomsPere" name="prenoms_pere">
            </div>
            <div class="col-md-6">
              <label for="editPrenomsNomMere" class="form-label">Prénoms & Nom de la Mère</label>
              <input type="text" class="form-control" id="editPrenomsNomMere" name="prenoms_nom_mere">
            </div>
            <div class="col-md-6">
              <label for="editEglise" class="form-label">Église affectée</label>
              <select class="form-select" id="editEglise" name="eglise_affectee">
                <option value="">Choisir...</option>
                {% for e in eglises %}
                  <option value="{{ e.id }}">{{ e.nom }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-6">
              <label for="editLieuAffectation" class="form-label">Lieu d'affectation</label>
              <input type="text" class="form-control" id="editLieuAffectation" name="lieu_affectation">
            </div>
            <div class="col-md-6">
              <label for="editDateAffectation" class="form-label">Date d'affectation</label>
              <input type="date" class="form-control" id="editDateAffectation" name="date_affectation">
            </div>
            <div class="col-md-6">
              <label for="editRegion" class="form-label">Région</label>
              <input type="text" class="form-control" id="editRegion" name="region">
            </div>
            <div class="col-md-6">
              <label for="editZone" class="form-label">Zone</label>
              <input type="text" class="form-control" id="editZone" name="zone">
            </div>
            <div class="col-md-6">
              <label for="editDiplomesObtenus" class="form-label">Diplômes obtenus</label>
              <input type="text" class="form-control" id="editDiplomesObtenus" name="diplomes_obtenus">
            </div>
            <div class="col-md-6">
              <label for="editTypesFormations" class="form-label">Types de formations</label>
              <input type="text" class="form-control" id="editTypesFormations" name="types_formations">
            </div>
          </div>

          <!-- Pièce jointe (document) -->
          <div class="mt-3">
            <label for="editDocumentFichier" class="form-label">Pièce d'enregistrement (document)</label>
            <input type="file" class="form-control" id="editDocumentFichier" name="document_fichier" accept=".doc,.docx,.pdf,image/*">
            <div class="form-text">Fichiers autorisés: .doc, .docx, .pdf (et images si nécessaire)</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
          <button type="submit" class="btn btn-warning"><i class="fas fa-save me-2"></i>Enregistrer les modifications</button>
        </div>
      </form>
    </div>
  </div>
</div>
