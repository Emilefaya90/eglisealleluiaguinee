{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="√âglise Pentec√¥te All√©luia de Guin√©e - Site officiel">
    <meta name="theme-color" content="#89253e">
    <title>{% block title %}Gestion √âglise{% endblock %}</title>

    <!-- Preconnect pour am√©liorer les performances -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://flagcdn.com" crossorigin>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <!-- Font Awesome CSS (v5 - support des classes .fas/.far/.fab) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" crossorigin="anonymous">

    <!-- CSS Local -->
    <link rel="stylesheet" href="{% static 'main/css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'main/css/newsletter.css' %}">
    {% block extra_css %}{% endblock %}

    <!-- Styles pour les sous-menus -->
    <style>
        .dropdown-submenu {
            position: relative;
        }
        .dropdown-submenu > .dropdown-menu {
            top: 0;
            left: 100%;
            margin-top: -1px;
            display: none;
            background: linear-gradient(135deg, #1e3a8a, #3b82f6) !important;
            border: none;
            box-shadow: 0 5px 20px rgba(30, 58, 138, 0.4);
        }
        .dropdown-submenu:hover > .dropdown-menu {
            display: block;
        }
        .dropdown-submenu .dropdown-item {
            color: white !important;
        }
        .dropdown-submenu .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.2) !important;
        }
        .submenu-dept {
            min-width: 200px;
            max-height: 300px;
            overflow-y: auto;
            padding: 4px 0;
            font-size: 0.85rem;
        }
        .submenu-dept .dropdown-item {
            padding: 5px 12px;
        }
        /* Style de la barre de d√©filement */
        .submenu-dept::-webkit-scrollbar {
            width: 8px;
        }
        .submenu-dept::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }
        .submenu-dept::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.4);
            border-radius: 4px;
        }
        .submenu-dept::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.6);
        }
        /* Sous-menu √âv√©nements */
        .submenu {
            min-width: 180px;
            padding: 4px 0;
            font-size: 0.9rem;
        }
        .submenu .dropdown-item {
            padding: 8px 15px;
        }
        .submenu .dropdown-item:hover {
            background: linear-gradient(135deg, #daa520, #b8860b);
            color: white;
        }
        .submenu .dropdown-item i {
            width: 20px;
        }
        .dropdown-toggle-submenu::after {
            content: '\F285';
            font-family: 'bootstrap-icons';
            float: right;
            margin-left: 10px;
        }
        /* Responsive: sous-menu en dessous sur mobile */
        @media (max-width: 991.98px) {
            .dropdown-submenu > .dropdown-menu {
                position: static;
                left: 0;
                margin-left: 1rem;
                border-left: 3px solid rgba(255,255,255,0.3);
                background: rgba(0,0,0,0.2);
            }
            .dropdown-submenu > a > .bi-chevron-right {
                transform: rotate(90deg);
                transition: transform 0.2s;
            }
            .dropdown-submenu.show > a > .bi-chevron-right {
                transform: rotate(-90deg);
            }
        }
        
        /* Animation rotation logo */
        .logo-spin {
            animation: spin 4s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Styles formulaire de don */
        #donationForm .form-control:focus,
        #donationForm .form-select:focus {
            border-color: #89253e !important;
            box-shadow: 0 0 0 3px rgba(137, 37, 62, 0.15) !important;
        }
        #donationForm .form-control:hover,
        #donationForm .form-select:hover {
            border-color: #b8860b !important;
        }
        .donation-amount:hover {
            background: linear-gradient(135deg, #89253e, #b8860b) !important;
            color: white !important;
            transform: scale(1.05);
        }
        .btn-check:checked + label {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
        }
        #donationModal .modal-body::-webkit-scrollbar {
            width: 8px;
        }
        #donationModal .modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        #donationModal .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #89253e, #b8860b);
            border-radius: 4px;
        }
    </style>
</head>
<body class="{% block body_class %}{% endblock %}">

    <!-- Barre sup√©rieure pour les r√©seaux sociaux en plein √©cran -->
    <div class="social-top-bar">
        <div class="social-top-content">
            <div class="social-top-left">
                <span class="social-top-label"><i style="color: #89253e; font-weight: 500;">{% trans "info" %}</i> <span class="guinea-flag" style="display: inline-flex; margin-left: 5px; vertical-align: middle; width: 30px; height: 20px; border: 1px solid #ddd; border-radius: 2px; overflow: hidden; box-shadow: 0 1px 2px rgba(0,0,0,0.1);"><span style="flex: 1; background-color: #ce1126;"></span><span style="flex: 1; background-color: #fcd116;"></span><span style="flex: 1; background-color: #009e49;"></span></span></span>
                <span style="margin-left: 15px;"><i class="bi bi-telephone" style="color: #89253e;"></i> (+224) 622 36 81 48</span>
                <span style="margin-left: 15px;"><i class="bi bi-telephone" style="color: #89253e;"></i> (+224) 664 35 33 82</span>
                <span style="margin-left: 15px;"><i class="bi bi-envelope" style="color: #89253e;"></i> E-mail: eglisealleluiagn@gmail.com</span>
            </div>
            <div class="social-top-right">
                <a href="https://www.facebook.com/share/1AchV2bgQD/?mibextid=wwXIfr" class="social-icon-nav facebook" aria-label="Facebook" target="_blank"><i class="bi bi-facebook"></i></a>
                <a href="https://www.instagram.com/eglise_pentecote_alleluia_gn?igsh=MWVyZTVocGxhdzllcQ==" class="social-icon-nav instagram" aria-label="Instagram" target="_blank"><i class="bi bi-instagram"></i></a>
                <a href="https://www.youtube.com/channel/UCv8RasSbiPMdM8Xq7DumOeg" class="social-icon-nav youtube" aria-label="YouTube" target="_blank"><i class="bi bi-youtube"></i></a>
                <a href="https://whatsapp.com/channel/0029VbBiWy10VycDcvV68w1d" class="social-icon-nav whatsapp" aria-label="WhatsApp" target="_blank" rel="noopener noreferrer" title="WhatsApp">
                    <i class="bi bi-whatsapp"></i>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Barre de navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <!-- Logo √† gauche -->
            <div class="nav-logo" style="margin-top: 60px; margin-bottom: 25px;">
                <img src="{% static 'main/images/Logo.svg' %}" alt="Logo" class="logo-img" style="width: 45px; height: 45px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="logo-fallback" style="display: none;">‚úù</div>
                <span class="logo-text" style="font-size: 1.2rem; text-transform: uppercase;">{% trans "Eglise All√©luia" %}</span>
            </div>
            
            <!-- Menu de navigation -->
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="{% url 'main:accueil' %}" class="nav-link {% if request.resolver_match.url_name == 'accueil' %}active{% endif %}">{% trans "Accueil" %}</a>
                </li>
                <li class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle {% if request.resolver_match.url_name == 'apropos' or request.resolver_match.url_name == 'historique' or request.resolver_match.url_name == 'objectif_general' or request.resolver_match.url_name == 'objectif_specifique' %}active{% endif %}" id="aproposDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {% trans "√Ä propos" %}
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="aproposDropdown">
                        <li>
                            <a class="dropdown-item d-flex justify-content-between align-items-center {% if request.resolver_match.url_name == 'historique' %}active{% endif %}" href="{% url 'main:historique' %}">
                                <span><i class="bi bi-book me-2"></i>{% trans "Historique" %}</span>
                                <span class="badge bg-primary rounded-pill">Nouveau</span>
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item {% if request.resolver_match.url_name == 'objectif_general' %}active{% endif %}" href="{% url 'main:objectif_general' %}">
                                <i class="bi bi-bullseye me-2"></i>{% trans "Vision G√©n√©rale" %}
                            </a>
                        </li>
                        <li>
                            <a class="dropdown-item {% if request.resolver_match.url_name == 'objectif_specifique' %}active{% endif %}" href="{% url 'main:objectif_specifique' %}">
                                <i class="bi bi-list-check me-2"></i>{% trans "Vision Sp√©cifique" %}
                            </a>
                        </li>
                        <li class="dropdown-submenu">
                            <a href="#" class="dropdown-item" onclick="event.preventDefault();">
                                <i class="bi bi-folder me-2"></i>{% trans "Nos Documents" %} <i class="bi bi-chevron-right float-end"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-dark">
                                <li>
                                    <a class="dropdown-item {% if request.resolver_match.url_name == 'statut_reglements' %}active{% endif %}" href="{% url 'main:statut_reglements' %}">
                                        <i class="bi bi-file-earmark-text me-2"></i>{% trans "Statuts & R√®glements" %}
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item {% if request.resolver_match.url_name == 'plan_strategique' %}active{% endif %}" href="{% url 'main:plan_strategique' %}">
                                        <i class="bi bi-graph-up me-2"></i>{% trans "Plan Strat√©gique" %}
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a class="dropdown-item {% if request.resolver_match.url_name == 'biographie_pasteurs' %}active{% endif %}" href="{% url 'main:biographie_pasteurs' %}">
                                <i class="bi bi-people me-2"></i>{% trans "Biographie Pasteurs" %}
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#contactModal">
                                <i class="bi bi-info-circle me-2"></i>{% trans "Plus d'infos" %}
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    {% if user.is_authenticated %}
                    <a href="#" class="nav-link dropdown-toggle {% if request.resolver_match.url_name == 'gestion' or request.resolver_match.url_name == 'eglises' or request.resolver_match.url_name == 'personnel_pastoral' or request.resolver_match.url_name == 'les_membres' or request.resolver_match.url_name == 'nos_fideles' or request.resolver_match.url_name == 'departements' or request.resolver_match.url_name == 'finances' or request.resolver_match.url_name == 'banque' or request.resolver_match.url_name == 'effectifs_culte_complet' or request.resolver_match.url_name == 'planification_complet' %}active{% endif %}" id="gestionDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {% trans "Gestion" %}
                    </a>
                    {% else %}
                    <a href="{% url 'login' %}?next=/gestion/" class="nav-link {% if request.resolver_match.url_name == 'gestion' %}active{% endif %}">
                        <i class="bi bi-lock me-1"></i>{% trans "Gestion" %}
                    </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="gestionDropdown">
                        <li>
                            <a href="{% url 'main:eglises' %}" class="dropdown-item">
                                <i class="bi bi-building me-2" aria-hidden="true"></i>{% trans "√âglises" %}
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'main:personnel_pastoral' %}" class="dropdown-item">
                                <i class="bi bi-person-badge me-2" aria-hidden="true"></i>{% trans "Personnel Pastoral" %}
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'main:nos_fideles' %}" class="dropdown-item">
                                <i class="bi bi-people me-2" aria-hidden="true"></i>{% trans "Les Fid√®les" %}
                            </a>
                        </li>

                        <li class="dropdown-submenu">
                            <a href="#" class="dropdown-item" onclick="event.preventDefault();">
                                <i class="bi bi-grid me-2" aria-hidden="true"></i>{% trans "Les D√©partements" %} <i class="bi bi-chevron-right float-end"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-dark submenu-dept">
                                <li>
                                    <a href="{% url 'main:departements' %}#formulaire-departement" class="dropdown-item">
                                        <i class="bi bi-plus-circle me-2"></i>{% trans "Ajouter D√©partement" %}
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=hommes" class="dropdown-item">
                                        <i class="fas fa-male me-2"></i>{% trans "Hommes" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=femmes" class="dropdown-item">
                                        <i class="fas fa-female me-2"></i>{% trans "Femmes" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=jeunesse" class="dropdown-item">
                                        <i class="bi bi-people me-2"></i>{% trans "Jeunesse" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=enfants" class="dropdown-item">
                                        <i class="bi bi-emoji-smile me-2"></i>{% trans "Enfants" %}
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=anciens" class="dropdown-item">
                                        <i class="bi bi-award me-2"></i>{% trans "Anciens/Anciennes" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=diacres" class="dropdown-item">
                                        <i class="bi bi-person-check me-2"></i>{% trans "Diacres/Diaconesses" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=huissiers" class="dropdown-item">
                                        <i class="bi bi-door-open me-2"></i>{% trans "Huissiers" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:departements' %}?dept=chorale" class="dropdown-item">
                                        <i class="bi bi-music-note-list me-2"></i>{% trans "Chorale" %}
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <!-- Item 'Nos Finances' supprim√© -->
                        <li>
                            <a class="dropdown-item" href="{% url 'main:banque' %}">
                                <i class="bi bi-bank me-2" aria-hidden="true"></i>{% trans "Finance" %}
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'main:effectifs_culte_complet' %}" class="dropdown-item">
                                <i class="bi bi-people-fill me-2" aria-hidden="true"></i>{% trans "Effectif du Culte" %}
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'main:planification_complet' %}" class="dropdown-item">
                                <i class="bi bi-calendar-week me-2" aria-hidden="true"></i>{% trans "Planning" %}
                            </a>
                        </li>
                        <!-- Bouton Caisse supprim√© -->
                    </ul>
                    {% endif %}
                </li>

                <li class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle {% if request.resolver_match.url_name == 'actualite' or request.resolver_match.url_name == 'evenements' or request.resolver_match.url_name == 'planification' or request.resolver_match.url_name == 'suivi_presences' or request.resolver_match.url_name == 'archivage_rapports' %}active{% endif %}" id="actualiteDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">{% trans "Actualit√©" %}</a>
                    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="actualiteDropdown">
                        <li class="dropdown-submenu">
                            <a href="#" class="dropdown-item dropdown-toggle-submenu" onclick="event.preventDefault();">
                                <i class="bi bi-calendar-event me-2" aria-hidden="true"></i>{% trans "√âv√©nements" %} <i class="bi bi-chevron-right float-end"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-dark submenu">
                                <li>
                                    <a href="{% url 'main:evenements' %}?tab=culte" class="dropdown-item">
                                        <i class="fas fa-church me-2" aria-hidden="true"></i>{% trans "Culte" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:evenements' %}?tab=etude" class="dropdown-item">
                                        <i class="fas fa-book-open me-2" aria-hidden="true"></i>{% trans "√âtude Biblique" %}
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'main:evenements' %}?tab=cours" class="dropdown-item">
                                        <i class="fas fa-graduation-cap me-2" aria-hidden="true"></i>{% trans "Cours Biblique" %}
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="{% url 'main:planification' %}" class="dropdown-item">
                                <i class="bi bi-calendar-week me-2" aria-hidden="true"></i>{% trans "Planification" %}
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'main:archivage_rapports' %}" class="dropdown-item">
                                <i class="bi bi-archive me-2" aria-hidden="true"></i>{% trans "Archivage des rapports" %}
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a href="{% url 'main:communication' %}" class="nav-link {% if request.resolver_match.url_name == 'communication' %}active{% endif %}">{% trans "Communication" %}</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'main:contact' %}" class="nav-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}">{% trans "Contactez-nous" %}</a>
                </li>

                
                
                <li class="nav-item language-selector dropdown">
                    <a href="#" class="nav-link dropdown-toggle" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {% if LANGUAGE_CODE == 'fr' %}
                            <img src="https://flagcdn.com/w20/fr.png" alt="Fran√ßais" class="flag">
                            <span>FR</span>
                        {% else %}
                            <img src="https://flagcdn.com/w20/gb.png" alt="English" class="flag">
                            <span>EN</span>
                        {% endif %}
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
                        <li>
                            <a href="#" class="dropdown-item language-option" data-lang="fr" onclick="setLanguage('fr'); return false;">
                                <img src="https://flagcdn.com/w20/fr.png" alt="Fran√ßais" class="flag">
                                <span>Fran√ßais</span>
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a href="#" class="dropdown-item language-option" data-lang="en" onclick="setLanguage('en'); return false;">
                                <img src="https://flagcdn.com/w20/gb.png" alt="English" class="flag">
                                <span>English</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item" style="margin-left: 10px;">
                    <a href="https://www.biblegateway.com/passage/?search=Jean+3%3A16&version=LSG" class="nav-link" target="_blank" rel="noopener noreferrer">
                        <i class="bi bi-book"></i> Bible
                    </a>
                </li>
            </ul>
            
            <!-- Menu hamburger pour mobile -->
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Contenu principal -->
    <main class="main-content">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Pied de page complet -->
    <footer class="footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <!-- Coordonn√©es et informations -->
                    <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
                        <div class="footer-info">
                            <h3>√âglise Pentec√¥te All√©luia</h3>
                            <p class="address">
                                <i class="bi bi-geo-alt-fill"></i>
                                Dixinn, bellevue en face de l'Ecobank<br>Conakry, Guin√©e
                            </p>
                            <p><i class="bi bi-telephone-fill"></i> +224 622 36 81 48</p>
                            <p><i class="bi bi-envelope-fill"></i> eglisealleluiagn@gmail.com</p>
                            
                            <!-- CTA pour les dons -->
                            <div class="mt-4">
                                <a href="#" class="btn btn-donate" data-bs-toggle="modal" data-bs-target="#donationModal"><i class="bi bi-heart-fill me-2"></i>Faire un don</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Verset biblique dynamique -->
                    <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
                        <h4>Verset du jour</h4>
                        <div class="bible-verse">
                            <p class="verse-text">"Car Dieu a tant aim√© le monde qu'il a donn√© son Fils unique, afin que quiconque croit en lui ne p√©risse point, mais qu'il ait la vie √©ternelle."</p>
                            <p class="verse-reference">Jean 3:16</p>
                        </div>
                    
                    </div>
                    
                    <!-- Newsletter et r√©seaux sociaux -->
                    <div class="col-lg-4 col-md-6 newsletter-section">
                        <h4 class="mb-1">Restez inform√©s</h4>
                        <p class="small mb-2">Inscrivez-vous √† notre newsletter pour recevoir les derni√®res nouvelles</p>
                        
                        <!-- Bouton pour afficher le formulaire d'inscription -->
                        <div class="text-center mt-1">
                            <button id="show-newsletter-btn" class="btn btn-subscribe btn-compact btn-sm mb-2">
                                <span class="btn-text">Inscription</span>
                                <i class="bi bi-envelope-plus-fill ms-2"></i>
                            </button>
                        </div>
                        
                        <!-- Formulaire d'Inscription √† la Newsletter moderne (cach√© par d√©faut) -->
                        <div id="newsletter-modal" class="newsletter-modal" style="display: none;">
                            <div class="newsletter-container">
                                <div class="newsletter-header">
                                    <h5>Inscription √† la newsletter</h5>
                                    <button type="button" class="btn-close" id="close-newsletter-btn" aria-label="Close"></button>
                                </div>
                                
                                <form id="newsletter-form" class="newsletter-form" novalidate>
                                    <div class="form-group mb-3">
                                        <label for="fullName" class="form-label"><i class="bi bi-person-fill"></i> Nom complet</label>
                                        <input type="text" class="form-control" id="fullName" required>
                                        <div class="invalid-feedback">Veuillez entrer votre nom complet</div>
                                    </div>
                                    
                                    <div class="form-group mb-3">
                                        <label for="email" class="form-label"><i class="bi bi-envelope-fill"></i> Adresse email</label>
                                        <input type="email" class="form-control" id="email" required>
                                        <div class="invalid-feedback">Veuillez entrer une adresse email valide</div>
                                    </div>
                                    
                                    <div class="form-group mb-3">
                                        <label class="frequency-label"><i class="bi bi-calendar-event"></i> Fr√©quence</label>
                                        <div class="frequency-options">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="frequency" id="daily" value="daily">
                                                <label class="form-check-label" for="daily">Quotidien</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="frequency" id="weekly" value="weekly" checked>
                                                <label class="form-check-label" for="weekly">Hebdomadaire</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="frequency" id="monthly" value="monthly">
                                                <label class="form-check-label" for="monthly">Mensuel</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="termsCheck" required>
                                        <label class="form-check-label" for="termsCheck">
                                            J'accepte de recevoir des emails et j'ai lu la <a href="#" class="privacy-link">politique de confidentialit√©</a>
                                        </label>
                                        <div class="invalid-feedback">Vous devez accepter les conditions pour continuer</div>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-subscribe">
                                        <span class="btn-text">S'inscrire</span>
                                        <i class="bi bi-arrow-right-circle-fill ms-2"></i>
                                    </button>
                                </form>
                                
                                <!-- Message de succ√®s (cach√© par d√©faut) -->
                                <div class="success-message" style="display: none;">
                                    <div class="success-icon">
                                        <i class="bi bi-check-circle-fill"></i>
                                    </div>
                                    <h5>Merci de votre inscription!</h5>
                                    <p>Vous recevrez bient√¥t nos prochaines communications.</p>
                                    <button class="btn btn-outline-success btn-sm mt-2" id="reset-form">Retour au formulaire</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Carte Google Maps -->
        <div class="footer-map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15764.735267467663!2d-13.712275871582033!3d9.535506899999994!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xf1cd81fc8b1109%3A0x57b5b21d1ae36b8b!2sConakry%2C%20Guinea!5e0!3m2!1sen!2sus!4v1656959022283!5m2!1sen!2sus" width="100%" height="180" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
        
        <!-- Copyright et mentions l√©gales -->
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="copyright">
                            &copy; {% now "Y" %} √âglise Pentec√¥te All√©luia de Guin√©e. Tous droits r√©serv√©s.
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="legal-links text-md-end">
                            <a href="#">Mentions l√©gales</a> | 
                            <a href="#">Politique de confidentialit√©</a> | 
                            <a href="#">Conditions d'utilisation</a>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 text-center">
                        <div style="font-style: italic; font-weight: 500; color: #89253e; text-decoration: underline;">
                            "All√©luia ! Car le Seigneur Dieu Tout Puisant a √âtabli Son R√®gne (Apoc. 19,6b)"
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal Formulaire de Don -->
    <div class="modal fade" id="donationModal" tabindex="-1" aria-labelledby="donationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content" style="border-radius: 20px; overflow: hidden;">
                <!-- En-t√™te du modal -->
                <div class="modal-header text-white d-flex justify-content-between align-items-center" style="background: linear-gradient(135deg, #89253e, #b8860b); border: none;">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-heart-fill me-3" style="font-size: 2rem;"></i>
                        <div>
                            <h4 class="modal-title mb-0" id="donationModalLabel">Faire un Don</h4>
                            <small>Soutenez l'≈ìuvre de Dieu au sein de l'Eglise Pentec√¥te All√©luia de Guin√©e</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <img src="{% static 'main/images/logo_eglise.png' %}" alt="Logo √âglise" class="logo-spin" style="width: 50px; height: 50px; object-fit: cover; border-radius: 50%; background: white;">
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                </div>
                
                <!-- Corps du modal -->
                <div class="modal-body p-4" style="background: linear-gradient(180deg, #fefefe 0%, #f8f4f0 100%);">
                    <!-- Message d'introduction -->
                    <div class="text-center mb-4 p-3" style="background: linear-gradient(135deg, #89253e15, #b8860b15); border-radius: 15px; border-left: 4px solid #89253e;">
                        <i class="bi bi-heart-fill text-danger me-2" style="font-size: 1.2rem;"></i>
                        <span style="color: #89253e; font-weight: 600;">Merci pour votre g√©n√©rosit√© !</span>
                        <p class="mb-0 mt-1 text-muted small">Votre don aide √† soutenir les activit√©s de l'√©glise et √† r√©pandre la Parole de Dieu.</p>
                    </div>
                    
                    <form id="donationForm">
                        <!-- Section Informations personnelles -->
                        <div class="mb-4 p-3" style="background: white; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                            <h6 class="mb-3" style="color: #89253e; border-bottom: 2px solid #b8860b; padding-bottom: 8px;">
                                <i class="bi bi-person-badge me-2"></i>Informations personnelles
                            </h6>
                            <div class="row g-2">
                                <div class="col-6 col-md-3">
                                    <label for="donorName" class="form-label fw-bold small text-muted">
                                        <i class="bi bi-person-fill me-1" style="color: #89253e;"></i>Nom *
                                    </label>
                                    <input type="text" class="form-control" id="donorName" placeholder="Votre nom" required style="border-radius: 10px; border: 2px solid #e0e0e0;">
                                </div>
                                <div class="col-6 col-md-3">
                                    <label for="donorEmail" class="form-label fw-bold small text-muted">
                                        <i class="bi bi-envelope-fill me-1" style="color: #89253e;"></i>Email
                                    </label>
                                    <input type="email" class="form-control" id="donorEmail" placeholder="votre@email.com" style="border-radius: 10px; border: 2px solid #e0e0e0;">
                                </div>
                                <div class="col-6 col-md-3">
                                    <label for="donorPhone" class="form-label fw-bold small text-muted">
                                        <i class="bi bi-telephone-fill me-1" style="color: #89253e;"></i>T√©l√©phone *
                                    </label>
                                    <input type="tel" class="form-control" id="donorPhone" placeholder="+224 6XX XX XX" required style="border-radius: 10px; border: 2px solid #e0e0e0;">
                                </div>
                                <div class="col-6 col-md-3">
                                    <label for="donorChurch" class="form-label fw-bold small text-muted">
                                        <i class="bi bi-building me-1" style="color: #89253e;"></i>√âglise
                                    </label>
                                    <input type="text" class="form-control" id="donorChurch" placeholder="Votre √©glise" style="border-radius: 10px; border: 2px solid #e0e0e0;">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Montant du don -->
                        <div class="mb-4 p-3" style="background: white; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                            <h6 class="mb-3" style="color: #89253e; border-bottom: 2px solid #b8860b; padding-bottom: 8px;">
                                <i class="bi bi-cash-coin me-2"></i>Montant du don
                            </h6>
                            <label class="form-label fw-bold small text-muted">
                                <i class="bi bi-cash-stack me-1" style="color: #28a745;"></i>Choisissez un montant (GNF) *
                            </label>
                            <div class="d-flex flex-wrap gap-2 mb-3">
                                <button type="button" class="btn donation-amount" data-amount="50000" style="border-radius: 20px; border: 2px solid #b8860b; color: #b8860b; font-weight: 600; transition: all 0.3s;">50 000</button>
                                <button type="button" class="btn donation-amount" data-amount="100000" style="border-radius: 20px; border: 2px solid #b8860b; color: #b8860b; font-weight: 600; transition: all 0.3s;">100 000</button>
                                <button type="button" class="btn donation-amount" data-amount="200000" style="border-radius: 20px; border: 2px solid #b8860b; color: #b8860b; font-weight: 600; transition: all 0.3s;">200 000</button>
                                <button type="button" class="btn donation-amount" data-amount="500000" style="border-radius: 20px; border: 2px solid #b8860b; color: #b8860b; font-weight: 600; transition: all 0.3s;">500 000</button>
                                <button type="button" class="btn donation-amount" data-amount="1000000" style="border-radius: 20px; border: 2px solid #89253e; color: #89253e; font-weight: 600; transition: all 0.3s;">1 000 000</button>
                            </div>
                            <div class="row g-2">
                                <div class="col-md-6">
                                    <label class="form-label fw-bold small text-muted">
                                        <i class="bi bi-cash me-1" style="color: #28a745;"></i>Montant *
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text" style="background: linear-gradient(135deg, #89253e, #b8860b); color: white; border: none; border-radius: 12px 0 0 12px;">GNF</span>
                                        <input type="number" class="form-control form-control-lg" id="donationAmount" placeholder="Entrez le montant" required style="border-radius: 0 12px 12px 0; border: 2px solid #e0e0e0; border-left: none;">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-bold small text-muted">
                                        <i class="bi bi-tag-fill me-1" style="color: #b8860b;"></i>Type de don
                                    </label>
                                    <select class="form-select form-select-lg" id="donationType" style="border-radius: 12px; border: 2px solid #e0e0e0;">
                                        <option value="general">üôè Don g√©n√©ral</option>
                                        <option value="dime">üí∞ D√Æme</option>
                                        <option value="offrande">üéÅ Offrande</option>
                                        <option value="construction">üèóÔ∏è Construction</option>
                                        <option value="mission">‚úùÔ∏è Mission √©vang√©lique</option>
                                        <option value="aide">‚ù§Ô∏è Aide aux n√©cessiteux</option>
                                        <option value="autre">üìù Autre</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Mode de paiement -->
                        <div class="mb-4 p-3" style="background: white; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                            <h6 class="mb-3" style="color: #89253e; border-bottom: 2px solid #b8860b; padding-bottom: 8px;">
                                <i class="bi bi-wallet2 me-2"></i>Mode de paiement
                            </h6>
                            <label class="form-label fw-bold small text-muted">
                                <i class="bi bi-credit-card me-1" style="color: #17a2b8;"></i>Choisissez votre mode de paiement *
                            </label>
                            <div class="row g-2">
                                <div class="col-4 col-md-2">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="payOrange" value="orange" required>
                                    <label class="btn w-100 py-2" for="payOrange" style="border-radius: 10px; border: 2px solid #ff7900; background: linear-gradient(135deg, #ff790015, #ff790005); transition: all 0.3s;">
                                        <i class="bi bi-phone-fill d-block" style="font-size: 1rem; color: #ff7900;"></i>
                                        <span style="font-weight: 600; font-size: 0.7rem; color: #ff7900;">Orange</span>
                                    </label>
                                </div>
                                <div class="col-4 col-md-2">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="payMTN" value="mtn">
                                    <label class="btn w-100 py-2" for="payMTN" style="border-radius: 10px; border: 2px solid #ffcc00; background: linear-gradient(135deg, #ffcc0015, #ffcc0005); transition: all 0.3s;">
                                        <i class="bi bi-phone-fill d-block" style="font-size: 1rem; color: #cc9900;"></i>
                                        <span style="font-weight: 600; font-size: 0.7rem; color: #cc9900;">MTN</span>
                                    </label>
                                </div>
                                <div class="col-4 col-md-2">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="payBank" value="bank">
                                    <label class="btn w-100 py-2" for="payBank" style="border-radius: 10px; border: 2px solid #0d6efd; background: linear-gradient(135deg, #0d6efd15, #0d6efd05); transition: all 0.3s;">
                                        <i class="bi bi-bank d-block" style="font-size: 1rem; color: #0d6efd;"></i>
                                        <span style="font-weight: 600; font-size: 0.7rem; color: #0d6efd;">Virement</span>
                                    </label>
                                </div>
                                <div class="col-4 col-md-2">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="payCash" value="cash">
                                    <label class="btn w-100 py-2" for="payCash" style="border-radius: 10px; border: 2px solid #198754; background: linear-gradient(135deg, #19875415, #19875405); transition: all 0.3s;">
                                        <i class="bi bi-cash-stack d-block" style="font-size: 1rem; color: #198754;"></i>
                                        <span style="font-weight: 600; font-size: 0.7rem; color: #198754;">Esp√®ces</span>
                                    </label>
                                </div>
                                <div class="col-4 col-md-2">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="payPaypal" value="paypal">
                                    <label class="btn w-100 py-2" for="payPaypal" style="border-radius: 10px; border: 2px solid #003087; background: linear-gradient(135deg, #00308715, #00308705); transition: all 0.3s;">
                                        <i class="bi bi-paypal d-block" style="font-size: 1rem; color: #003087;"></i>
                                        <span style="font-weight: 600; font-size: 0.7rem; color: #003087;">PayPal</span>
                                    </label>
                                </div>
                                <div class="col-4 col-md-2">
                                    <input type="radio" class="btn-check" name="paymentMethod" id="payVisa" value="visa">
                                    <label class="btn w-100 py-2" for="payVisa" style="border-radius: 10px; border: 2px solid #1a1f71; background: linear-gradient(135deg, #1a1f7115, #1a1f7105); transition: all 0.3s;">
                                        <i class="bi bi-credit-card-2-front-fill d-block" style="font-size: 1rem; color: #1a1f71;"></i>
                                        <span style="font-weight: 600; font-size: 0.7rem; color: #1a1f71;">Visa</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Informations de paiement mobile -->
                        <div id="mobilePaymentInfo" class="mb-3 p-3" style="background: linear-gradient(135deg, #ff790020, #ffcc0010); border-radius: 15px; border-left: 4px solid #ff7900; display: none;">
                            <h6 class="fw-bold" style="color: #ff7900;"><i class="bi bi-phone-vibrate me-2"></i>Informations de paiement mobile</h6>
                            <div class="d-flex flex-wrap gap-3 mt-2">
                                <div class="p-2 px-3" style="background: white; border-radius: 10px;">
                                    <small class="text-muted">Orange Money</small>
                                    <p class="mb-0 fw-bold" style="color: #ff7900;"><i class="bi bi-telephone-fill me-1"></i>+224 622 36 81 48</p>
                                </div>
                                <div class="p-2 px-3" style="background: white; border-radius: 10px;">
                                    <small class="text-muted">MTN Money</small>
                                    <p class="mb-0 fw-bold" style="color: #cc9900;"><i class="bi bi-telephone-fill me-1"></i>+224 664 35 33 82</p>
                                </div>
                            </div>
                            <small class="text-muted d-block mt-2"><i class="bi bi-info-circle me-1"></i>Envoyez le montant et gardez le re√ßu comme preuve.</small>
                        </div>
                        
                        <!-- Informations bancaires -->
                        <div id="bankPaymentInfo" class="mb-3 p-3" style="background: linear-gradient(135deg, #0d6efd15, #0d6efd05); border-radius: 15px; border-left: 4px solid #0d6efd; display: none;">
                            <h6 class="fw-bold" style="color: #0d6efd;"><i class="bi bi-bank2 me-2"></i>Coordonn√©es bancaires</h6>
                            <div class="mt-2 p-3" style="background: white; border-radius: 10px;">
                                <p class="mb-2"><i class="bi bi-building me-2" style="color: #0d6efd;"></i><strong>Banque :</strong> Ecobank Guin√©e</p>
                                <p class="mb-2"><i class="bi bi-person-badge me-2" style="color: #0d6efd;"></i><strong>Nom du compte :</strong> √âglise Pentec√¥te All√©luia</p>
                                <p class="mb-0"><i class="bi bi-upc me-2" style="color: #0d6efd;"></i><strong>IBAN :</strong> GN00 0000 0000 0000 0000</p>
                            </div>
                        </div>
                        
                        <!-- Message optionnel -->
                        <div class="mb-3 p-3" style="background: white; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                            <label for="donationMessage" class="form-label fw-bold small text-muted">
                                <i class="bi bi-chat-heart me-1" style="color: #89253e;"></i>Message ou intention de pri√®re (optionnel)
                            </label>
                            <textarea class="form-control" id="donationMessage" rows="3" placeholder="Laissez un message ou une intention de pri√®re..." style="border-radius: 12px; border: 2px solid #e0e0e0; resize: none;"></textarea>
                        </div>
                    </form>
                </div>
                
                <!-- Pied du modal -->
                <div class="modal-footer d-flex justify-content-between" style="border: none; background: linear-gradient(180deg, #f8f4f0 0%, #f0ebe5 100%); padding: 1.5rem;">
                    <button type="button" class="btn btn-light btn-lg px-4" data-bs-dismiss="modal" style="border-radius: 25px; border: 2px solid #ddd;">
                        <i class="bi bi-x-lg me-2"></i>Annuler
                    </button>
                    <button type="submit" form="donationForm" class="btn btn-lg text-white px-5" style="background: linear-gradient(135deg, #89253e, #b8860b); border-radius: 25px; box-shadow: 0 4px 15px rgba(137, 37, 62, 0.4); transition: all 0.3s;">
                        <i class="bi bi-heart-fill me-2"></i>Confirmer le don
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Script pour le formulaire de don -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // S√©lection des montants pr√©d√©finis
        document.querySelectorAll('.donation-amount').forEach(function(btn) {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.donation-amount').forEach(b => {
                    b.style.background = 'transparent';
                    b.style.color = b.dataset.amount === '1000000' ? '#89253e' : '#b8860b';
                    b.style.transform = 'scale(1)';
                });
                this.style.background = 'linear-gradient(135deg, #89253e, #b8860b)';
                this.style.color = 'white';
                this.style.transform = 'scale(1.05)';
                document.getElementById('donationAmount').value = this.dataset.amount;
            });
        });
        
        // Afficher les infos de paiement selon le mode choisi
        document.querySelectorAll('input[name="paymentMethod"]').forEach(function(radio) {
            radio.addEventListener('change', function() {
                document.getElementById('mobilePaymentInfo').style.display = 'none';
                document.getElementById('bankPaymentInfo').style.display = 'none';
                
                if (this.value === 'orange' || this.value === 'mtn') {
                    document.getElementById('mobilePaymentInfo').style.display = 'block';
                } else if (this.value === 'bank') {
                    document.getElementById('bankPaymentInfo').style.display = 'block';
                }
            });
        });
        
        // Soumission du formulaire
        document.getElementById('donationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            var name = document.getElementById('donorName').value;
            var amount = document.getElementById('donationAmount').value;
            var type = document.getElementById('donationType').options[document.getElementById('donationType').selectedIndex].text;
            var paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
            
            if (!name || !amount || !paymentMethod) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }
            
            // Message de confirmation
            alert('üôè Merci ' + name + ' pour votre don de ' + parseInt(amount).toLocaleString() + ' GNF !\n\nType: ' + type + '\n\nQue Dieu vous b√©nisse abondamment !');
            
            // Fermer le modal
            var modal = bootstrap.Modal.getInstance(document.getElementById('donationModal'));
            modal.hide();
            
            // R√©initialiser le formulaire
            this.reset();
            document.querySelectorAll('.donation-amount').forEach(b => {
                b.classList.remove('active', 'btn-primary');
                b.classList.add('btn-outline-primary');
            });
            document.getElementById('mobilePaymentInfo').style.display = 'none';
            document.getElementById('bankPaymentInfo').style.display = 'none';
        });
    });
    </script>

    <!-- Bootstrap JS Bundle avec Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Script pour le diaporama -->
    <script src="{% static 'main/js/slideshow.js' %}"></script>
    <!-- Script pour le formulaire de newsletter -->
    <script src="{% static 'main/js/newsletter.js' %}"></script>
    <script src="{% static 'main/js/script.js' %}"></script>
    <!-- Script de traduction FR/EN -->
    <script src="{% static 'main/js/translations.js' %}"></script>
    <!-- Auto-dismiss des messages/alertes apr√®s 5 secondes -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // D√©lai d'attente avant fermeture
        var DISMISS_DELAY = 5000; // 5 secondes

        setTimeout(function () {
          document.querySelectorAll('.alert').forEach(function (el) {
            try {
              // Utiliser l'API Bootstrap si disponible
              if (window.bootstrap && bootstrap.Alert) {
                var instance = bootstrap.Alert.getOrCreateInstance(el);
                instance.close();
              } else {
                // Fallback: disparition progressive
                el.classList.remove('show');
                el.classList.add('fade');
                setTimeout(function(){ el.remove(); }, 300);
              }
            } catch (e) {
              // √âviter toute interruption si une alerte ne peut pas se fermer
            }
          });
        }, DISMISS_DELAY);
      });

      // Gestion des sous-menus sur mobile
      document.querySelectorAll('.dropdown-submenu > a').forEach(function(el) {
        el.addEventListener('click', function(e) {
          if (window.innerWidth < 992) {
            e.preventDefault();
            e.stopPropagation();
            var parent = this.parentElement;
            // Fermer les autres sous-menus ouverts
            document.querySelectorAll('.dropdown-submenu.show').forEach(function(other) {
              if (other !== parent) {
                other.classList.remove('show');
                var otherMenu = other.querySelector('.dropdown-menu');
                if (otherMenu) otherMenu.classList.remove('show');
              }
            });
            // Toggle le sous-menu actuel
            parent.classList.toggle('show');
            var submenu = parent.querySelector('.dropdown-menu');
            if (submenu) submenu.classList.toggle('show');
          }
        });
      });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
